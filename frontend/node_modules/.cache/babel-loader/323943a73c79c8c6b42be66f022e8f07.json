{"ast":null,"code":"import _slicedToArray from\"/Users/jiahuiwu/Desktop/onlineorder-frontend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Button,Card,List,message,Select,Tooltip}from\"antd\";import{useEffect,useState}from\"react\";import{addItemToCart,getMenus,getRestaurants}from\"../utils\";import{PlusOutlined}from\"@ant-design/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Option=Select.Option;var AddToCartButton=function AddToCartButton(_ref){var itemId=_ref.itemId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var AddToCart=function AddToCart(){setLoading(true);addItemToCart(itemId).then(function(){message.success(\"success\");}).catch(function(error){setLoading(false);});};return/*#__PURE__*/_jsx(Tooltip,{title:\"Add to shopping cart\",children:/*#__PURE__*/_jsx(Button,{loading:loading,type:\"primary\",icon:/*#__PURE__*/_jsx(PlusOutlined,{}),onClick:AddToCart})});};var FoodList=function FoodList(){// 1. staet for current restarant\n// 2. state for the food of selected restarant\n// 3. state for loading\n// 4. state for all the restarants\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),foodData=_useState4[0],setFoodData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),curRest=_useState6[0],setCurRest=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),restarants=_useState8[0],setRestarants=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loadingRest=_useState12[0],setLoadingRest=_useState12[1];useEffect(function(){setLoadingRest(true);getRestaurants().then(function(data){setRestarants(data);}).catch(function(error){message.error(error.message);}).finally(function(){setLoadingRest(false);});},[]);useEffect(function(){if(curRest){setLoading(true);getMenus(curRest).then(function(data){setFoodData(data);}).catch(function(err){message.error(err.message);}).finally(function(){setLoading(false);});}},[curRest]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Select,{value:curRest,onSelect:function onSelect(value){return setCurRest(value);},placeholder:\"select a restarant\",children:restarants.map(function(item){return/*#__PURE__*/_jsx(Option,{value:item.id,children:item.name},item.id);})}),curRest&&/*#__PURE__*/_jsx(List,{style:{marginTop:20},loading:loading,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:foodData,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsxs(Card,{title:item.name,extra:/*#__PURE__*/_jsx(AddToCartButton,{itemId:item.id}),children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrl,alt:item.name,style:{height:340,width:\"100%\",display:\"block\"}}),\"Price: \".concat(item.price)]})});}})]});};export default FoodList;","map":{"version":3,"names":["React","Button","Card","List","message","Select","Tooltip","useEffect","useState","addItemToCart","getMenus","getRestaurants","PlusOutlined","Option","AddToCartButton","itemId","loading","setLoading","AddToCart","then","success","catch","error","FoodList","foodData","setFoodData","curRest","setCurRest","restarants","setRestarants","loadingRest","setLoadingRest","data","finally","err","value","map","item","id","name","marginTop","gutter","xs","sm","md","lg","xl","xxl","imageUrl","height","width","display","price"],"sources":["/Users/jiahuiwu/Desktop/onlineorder-frontend/frontend/src/components/FoodList.jsx"],"sourcesContent":["import React from \"react\";\nimport { Button, Card, List, message, Select, Tooltip } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { addItemToCart, getMenus, getRestaurants } from \"../utils\";\nimport { PlusOutlined } from \"@ant-design/icons\";\n\nconst { Option } = Select\n\nconst AddToCartButton = ({itemId}) => {\n    const [loading, setLoading] = useState(false)\n\n    const AddToCart = () => {\n        setLoading(true)\n        addItemToCart(itemId).then(() => {\n            message.success(\"success\")\n        }).catch((error) => {\n            setLoading(false)\n        })\n    }\n    return (\n        <Tooltip title=\"Add to shopping cart\">\n        <Button\n          loading={loading}\n          type=\"primary\"\n          icon={<PlusOutlined />}\n          onClick={AddToCart}\n        />\n        </Tooltip>\n  \n    )\n}\n\n\n\nconst FoodList = () => {\n// 1. staet for current restarant\n// 2. state for the food of selected restarant\n// 3. state for loading\n// 4. state for all the restarants\n\nconst [foodData, setFoodData] = useState([])\nconst [curRest, setCurRest] = useState()\nconst [restarants, setRestarants] = useState([])\nconst [loading, setLoading] = useState(false)\nconst [loadingRest, setLoadingRest] = useState(false)\n\nuseEffect(() => {\n    setLoadingRest(true)\n    getRestaurants().then(\n        (data) => {\n            setRestarants(data)\n        }\n    ).catch((error) => {\n        message.error(error.message)\n    }).finally(() => {\n        setLoadingRest(false)\n    })\n}, [])\n\nuseEffect(() => {\n    if (curRest) {\n      setLoading(true);\n      getMenus(curRest)\n        .then((data) => {\n          setFoodData(data);\n        })\n        .catch((err) => {\n          message.error(err.message);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    }\n  }, [curRest]);\n\n\nreturn (\n    <>\n        <Select\n            value = {curRest}\n            onSelect = {(value) => setCurRest(value)}\n            placeholder = \"select a restarant\"\n\n        >\n            {restarants.map((item) => {\n                return <Option key = {item.id} value = {item.id}>{item.name}</Option>;\n            })}\n        </Select>\n\n        {curRest && (\n        <List\n          style={{ marginTop: 20 }}\n          loading={loading}\n          grid={{\n            gutter: 16,\n            xs: 1,\n            sm: 2,\n            md: 4,\n            lg: 4,\n            xl: 3,\n            xxl: 3,\n          }}\n          dataSource={foodData}\n          renderItem={(item) => (\n            <List.Item>\n              <Card\n                title={item.name}\n                extra={<AddToCartButton itemId={item.id} />}\n              >\n                <img\n                  src={item.imageUrl}\n                  alt={item.name}\n                  style={{ height: 340, width: \"100%\", display: \"block\" }}\n                />\n                {`Price: ${item.price}`}\n              </Card>\n            </List.Item>\n          )}\n        />\n      )}\n    </>\n  );\n}\n\n\n\n    \n\nexport default FoodList"],"mappings":"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"},"metadata":{},"sourceType":"module"}